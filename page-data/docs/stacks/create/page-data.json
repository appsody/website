{"componentChunkName":"component---src-templates-doc-template-js","path":"/docs/stacks/create/","webpackCompilationHash":"32f507b21f01e927b2d8","result":{"data":{"markdownRemark":{"html":"<h1 id=\"creating-a-stack\"><a href=\"#creating-a-stack\" aria-label=\"creating a stack permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating a stack</h1>\n<p>You might like to create your own stack, for example if the current Appsody stacks don't meet your needs or if you want to add a framework or language that isn't currently supported.</p>\n<p>A stack comprises two main components: a stack image, and templates that use the stack image to provide starter applications for your development team to build on.</p>\n<p>You can start by using either the Appsody CLI <code>appsody stack create</code> command, or Git clone. Both methods involve basing your new stack on an existing stack, to create the starting point for developing your own Appsody stack.</p>\n<h2 id=\"getting-started\"><a href=\"#getting-started\" aria-label=\"getting started permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting started</h2>\n<h3 id=\"using-the-appsody-cli\"><a href=\"#using-the-appsody-cli\" aria-label=\"using the appsody cli permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the Appsody CLI</h3>\n<p>The quickest way to create a new stack is to use the <code>appsody stack create</code> command, which creates a new stack by copying an existing stack. By default, the new stack is based on the <a href=\"https://github.com/appsody/stacks/tree/master/samples/sample-stack\">sample stack</a>. For example, to create a new stack named <code>my-stack</code>, in a new directory, use this command:</p>\n<p><code>appsody stack create my-stack</code></p>\n<p>If you want to use a different stack as the basis for your new stack, use the <code>copy</code> flag to specify the stack you want to use as the starting point. You can use <code>appsody list</code> to see the available stacks. For example, to create a new stack, called <code>my-stack</code>, based on the Node.js Express stack use this command:</p>\n<p><code>appsody stack create my-stack --copy incubator/nodejs-express</code></p>\n<h3 id=\"using-git-clone\"><a href=\"#using-git-clone\" aria-label=\"using git clone permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using Git clone</h3>\n<p>To create a new stack using Git, clone the <a href=\"https://github.com/appsody/stacks/tree/master/samples/sample-stack\">sample stack</a> in the stacks repository.</p>\n<ol>\n<li>\n<p>Clone the stacks repository:</p>\n<pre><code class=\"language-bash\">git clone https://github.com/appsody/stacks.git\ncd stacks/samples/sample-stack\n</code></pre>\n</li>\n</ol>\n<p>Whichever method you used to create your stack, you now have the basic <a href=\"/content/docs/stacks/stack-structure.md\">structure</a> of an Appsody stack.</p>\n<h2 id=\"creating-the-stack-image\"><a href=\"#creating-the-stack-image\" aria-label=\"creating the stack image permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating the stack image</h2>\n<p>The stack image contains everything that will be common throughout all templates that leverage it. For example, the <a href=\"https://github.com/appsody/stacks/tree/master/incubator/nodejs-express/image\"><code>nodejs-express</code></a> stack image provides health endpoints and prometheus metrics without developers needing to implement it themselves.</p>\n<p>The <code>/image</code> directory will contain everything that is needed for the stack's image. You <strong>must</strong> include a <code>Dockerfile-stack</code> file in the <code>/image</code> directory, which defines how the stack image is built.</p>\n<p>Stack creators configure <a href=\"/content/docs/stacks/environment-variables.md\">environment variables</a> in <code>Dockerfile-stack</code> to specify the behaviour they expect from the stack throughout the application development lifecycle. <code>Appsody CLI</code> and <code>Appsody controller</code> inspect these environment variables and then drive the expected behaviour for the developer.</p>\n<p>If a stack image is built upon another stack's image, it will inherit all the Appsody variables from the base stack. It can override the variables it wants to change. This allows users to create stacks with slightly different behaviour while still getting updates from the base stack.</p>\n<p>The <code>/image/project</code> directory contains the base of the application. You may decide not to include any application code here but it is recommended to add some value to the stack. For example, by controlling dependency versions. The <code>project</code> <strong>must</strong> include a production <code>Dockerfile</code> here which will be used by the <a href=\"/content/docs/using-appsody/cli-commands.md/#appsody-build\"><code>appsody build</code></a> command.</p>\n<h2 id=\"creating-a-template\"><a href=\"#creating-a-template\" aria-label=\"creating a template permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating a template</h2>\n<p>Templates provide an initial application to enable developers to get started with a stack. They provide a starter application that a developer can expand and adapt as they require.</p>\n<p>All templates should be created within <code>/templates</code>. Every template is contained within its own directory, <code>/templates/&#x3C;template-name></code>.</p>\n<p>If the stack is intended to be contributed to the  <a href=\"https://github.com/appsody/stacks\">Appsody stacks repository</a> the stack image should be called <code>appsody/&#x3C;stack-name>:&#x3C;stack-version></code>.</p>\n<h2 id=\"building-and-testing-stacks-locally\"><a href=\"#building-and-testing-stacks-locally\" aria-label=\"building and testing stacks locally permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building and testing stacks locally</h2>\n<p>Now that have you have created a stack you can <a href=\"/content/docs/stacks/build-and-test.md\">build and test</a> it locally.</p>\n<h2 id=\"contributing-a-stack\"><a href=\"#contributing-a-stack\" aria-label=\"contributing a stack permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contributing a stack</h2>\n<p>If you would like to contribute a new stack to the <a href=\"https://github.com/appsody/stacks\">stacks repository</a> the Appsody <a href=\"https://github.com/appsody/website/blob/master/CONTRIBUTING.md\">contributing guildlines</a> explains how.</p>\n<p>We welcome new contributions but before starting a large piece of work we recommend to reach out to us on <a href=\"http://appsody-slack.eu-gb.mybluemix.net/\">slack</a> or <a href=\"https://github.com/appsody/stacks/issues/\">raise an issue</a> to start a discussion.</p>\n<h2 id=\"maintaining-a-separate-repository\"><a href=\"#maintaining-a-separate-repository\" aria-label=\"maintaining a separate repository permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Maintaining a separate repository</h2>\n<p>In addition to the main Appsody stacks repository, you can maintain your own set of stacks. This is useful for developing stacks and separating sets of stacks for different uses.</p>\n<p>By default you have access to the <code>appsodyhub</code> repository:</p>\n<pre><code>$ appsody repo list\nNAME            URL                                                               \n*appsodyhub     https://github.com/appsody/stacks/releases/latest/download/incubator-index.yaml  \nexperimental    https://github.com/appsody/stacks/releases/latest/download/experimental-index.yaml\n</code></pre>\n<p>A repository is defined by an <code>index.yaml</code>. This file lists all stacks and  templates it wants to make avalible.  See the <code>appsodyhub</code> <a href=\"https://raw.githubusercontent.com/appsody/stacks/master/index.yaml\">index</a> as an example.</p>\n<p>Each template section must include a link to its <code>.tar.gz</code> file. This will be used by <code>appsody init</code> to initialize a Appsody project.</p>\n<p>You can add you repository by running:</p>\n<pre><code>appsody repo add &#x3C;name> &#x3C;index-url>\n</code></pre>\n<p>For example:</p>\n<pre><code>appsody repo add my-repo file:///Users/foo/index.yaml\n\nappsody repo list\nNAME           URL                                                               \n*appsodyhub    https://github.com/appsody/stacks/releases/latest/download/incubator-index.yaml\nexperimental   https://github.com/appsody/stacks/releases/latest/download/experimental-index.yaml\nmy-repo        file:///Users/foo/index.yaml\n</code></pre>\n<p>Once the repository has been added you can access the stacks in that repo by specifying the repository name when initializing your project:</p>\n<pre><code>appsody init my-repo/&#x3C;stack-name>\n</code></pre>"}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}