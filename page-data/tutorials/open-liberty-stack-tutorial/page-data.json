{"componentChunkName":"component---src-templates-tutorial-template-js","path":"/tutorials/open-liberty-stack-tutorial/","webpackCompilationHash":"6132395a3b6a5c4333c0","result":{"data":{"markdownRemark":{"html":"<h1 id=\"using-the-open-liberty-stack\"><a href=\"#using-the-open-liberty-stack\" aria-label=\"using the open liberty stack permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the Open Liberty stack</h1>\n<p>Open Liberty is a lightweight, open framework for building fast and efficient cloud-native microservices.\nBlazingly fast startup times and seamless \"dev mode\" integration means you can focus less on\nadministration and more on writing code.</p>\n<p><a href=\"https://appsody.dev/\">Appsody</a> takes this a step further by bringing your development into the cloud. Using the <a href=\"https://github.com/appsody/stacks/tree/master/incubator/java-openliberty\">Open Liberty stack</a>, you can develop your Open Liberty app directly within a container with real time compilation and code updates.</p>\n<p>This tutorial walks you through the basics of using the Open Liberty stack with Appsody. By the end of this guide, you will be up and running with a starter MicroProfile application running on Open Liberty.</p>\n<h1 id=\"prerequisites\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h1>\n<ul>\n<li>Install the Appsody CLI following <a href=\"https://appsody.dev/docs/installing/installing-appsody/\">these instructions</a></li>\n<li><a href=\"https://adoptopenjdk.net/?variant=openjdk8&#x26;jvmVariant=openj9\">A Java 8 JDK Installation</a></li>\n<li><a href=\"https://maven.apache.org/\">Apache Maven</a></li>\n<li>\n<p>Docker Desktop</p>\n<ul>\n<li><a href=\"https://docs.docker.com/docker-for-windows/\">Windows Docker Installation</a></li>\n<li><a href=\"https://docs.docker.com/docker-for-mac/\">MacOS Docker Installation</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"create-a-new-open-liberty-project\"><a href=\"#create-a-new-open-liberty-project\" aria-label=\"create a new open liberty project permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create a new Open Liberty project</h2>\n<p>Creating a new project is fast and easy. Navigate to an empty directory and issue the following command:</p>\n<pre><code>appsody init java-openliberty\n</code></pre>\n<p>When the build completes, you should see something like:</p>\n<pre><code>...\n[InitScript] [INFO] ------------------------------------------------------------------------\n[InitScript] [INFO] BUILD SUCCESS\n[InitScript] [INFO] ------------------------------------------------------------------------\n[InitScript] [INFO] Total time: 0.800 s\n[InitScript] [INFO] Finished at: 2019-09-02T15:52:41+01:00\n[InitScript] [INFO] ------------------------------------------------------------------------\nSuccessfully initialized Appsody project with the java-openliberty stack and the default template.\n</code></pre>\n<p>Your new Open Liberty project should look similar to the following:</p>\n<pre><code>.\n├── mvnw\n├── mvnw.cmd\n├── pom.xml\n└── src\n    ├── main\n    │   ├── java\n    │   │   └── dev\n    │   │       └── appsody\n    │   │           └── starter\n    │   │               ├── StarterApplication.java\n    │   │               ├── StarterResource.java\n    │   │               └── health\n    │   │                   ├── StarterLivenessCheck.java\n    │   │                   └── StarterReadinessCheck.java\n    │   ├── liberty\n    │   │   └── config\n    │   │       ├── configDropins\n    │   │       │   └── defaults\n    │   │       │       └── quick-start-security.xml\n    │   │       └── server.xml\n    │   └── webapp\n    │       ├── WEB-INF\n    │       │   └── beans.xml\n    │       └── index.html\n    └── test\n        └── java\n            └── it\n                └── dev\n                    └── appsody\n                        └── starter\n                            ├── EndpointTest.java\n                            └── HealthEndpointTest.java\n</code></pre>\n<p>This is intentionally a 'bare-bones' project so as to avoid the need to delete unnecessary files. It contains:</p>\n<ul>\n<li><code>StarterApplication.java</code> - a JAX-RS Application class  </li>\n<li><code>StarterResource.java</code> - a JAX-RS Resource class</li>\n<li><code>server.xml</code> and <code>quick-start-security.xml</code> - the Liberty server configuration files</li>\n<li><code>index.html</code> - a static index file</li>\n<li><code>pom.xml</code> - the project build file</li>\n</ul>\n<h2 id=\"run-your-app\"><a href=\"#run-your-app\" aria-label=\"run your app permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run your app</h2>\n<p>You are now ready to run your app. Issue the following command:</p>\n<pre><code>appsody run\n</code></pre>\n<p>The run command for this stack ensures that the compiled code is up to date, then starts the Open Liberty server and deploys the application in <code>dev mode</code>.  Dev mode is Open Liberty's support for hot application update during development. Check out <a href=\"https://openliberty.io/blog/2019/10/22/liberty-dev-mode.html\">this blog</a> for more information.</p>\n<p>After a while you should see output similar to the following indicating that the application is up and running.</p>\n<blockquote>\n<p>If tests are started automatically, you might need to scroll up to find this output.</p>\n</blockquote>\n<pre><code>[Container] [INFO] [AUDIT   ] CWWKZ0001I: Application starter-app started in 3.393 seconds.\n[Container] [INFO] [AUDIT   ] CWWKF0012I: The server installed the following features: [appSecurity-2.0, cdi-2.0, concurrent-1.0, distributedMap-1.0, jaxrs-2.1, jaxrsClient-2.1, jndi-1.0, json-1.0, jsonb-1.0, jsonp-1.1, jwt-1.0, microProfile-3.2, mpConfig-1.3, mpFaultTolerance-2.0, mpHealth-2.1, mpJwt-1.1, mpMetrics-2.2, mpOpenAPI-1.1, mpOpenTracing-1.3, mpRestClient-1.3, opentracing-1.3, servlet-4.0, ssl-1.0].\n[Container] [INFO] [AUDIT   ] CWWKF0011I: The defaultServer server is ready to run a smarter planet. The defaultServer server started in 14.015 seconds.\n[Container] [INFO] CWWKM2015I: Match number: 1 is [2/17/20 16:27:14:725 UTC] 0000002a com.ibm.ws.kernel.feature.internal.FeatureManager            A CWWKF0011I: The defaultServer server is ready to run a smarter planet. The defaultServer server started in 14.015 seconds..\n[Container] [INFO] Tests will run automatically when changes are detected.\n</code></pre>\n<p>Just like that, your Open Liberty application is running inside a Docker container ready for development.</p>\n<p>Next, navigate to the JAX-RS application resource endpoint to confirm that the default JAX-RS resource is available.  Open the following link in your browser:</p>\n<p><a href=\"http://localhost:9080/starter/resource\">http://localhost:9080/starter/resource</a></p>\n<p>You should see the response <code>StarterResource response</code></p>\n<p>To show Open Liberty's dev mode in action, make a change to the source code. Navigate to the <code>src/main/java/dev/appsody/starter</code> directory, and open the file called <code>StarterResource.java</code> - this is the JAX-RS resource.</p>\n<pre><code class=\"language-Java\">package dev.appsody.starter;\n\nimport javax.ws.rs.GET;\nimport javax.ws.rs.Path;\n\n@Path(\"/resource\")\npublic class StarterResource {\n\n    @GET\n    public String getRequest() {\n        return \"StarterResource response\";\n    }\n}\n</code></pre>\n<p>Try changing the message in <code>StarterResource.java</code>. When you save the file, the source is compiled and the application updated:</p>\n<pre><code>[Container] [INFO] Source compilation was successful.\n[Container] [INFO] [AUDIT   ] CWWKT0017I: Web application removed (default_host): http://a904f464a04b:9080/\n[Container] [INFO] [AUDIT   ] CWWKZ0009I: The application starter-app has stopped successfully.\n[Container] [INFO] [AUDIT   ] CWWKT0016I: Web application available (default_host): http://a904f464a04b:9080/\n[Container] [INFO] [AUDIT   ] CWWKZ0003I: The application starter-app updated in 1.447 seconds.\n</code></pre>\n<p>Refresh your browser page to see the updated message.</p>\n<h2 id=\"microprofile-capabilities\"><a href=\"#microprofile-capabilities\" aria-label=\"microprofile capabilities permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MicroProfile capabilities</h2>\n<p>The Open Liberty stack provides your application with a full set of MicroProfile 3.2 technologies and enables these out of the box.</p>\n<h3 id=\"health\"><a href=\"#health\" aria-label=\"health permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Health</h3>\n<p>With the server still running, open the following link in your browser:</p>\n<p><a href=\"http://localhost:9080/health\">http://localhost:9080/health</a></p>\n<p>This is a basic health check provided with your application. You should see output similar to this indicating that your service is up and running:</p>\n<pre><code>{\"checks\":[{\"data\":{},\"name\":\"StarterLivenessCheck\",\"status\":\"UP\"},{\"data\":{},\"name\":\"StarterReadinessCheck\",\"status\":\"UP\"}],\"status\":\"UP\"}\n</code></pre>\n<h3 id=\"open-api\"><a href=\"#open-api\" aria-label=\"open api permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Open API</h3>\n<p>Now open the following link to view available REST APIs for your application:</p>\n<p><a href=\"http://localhost:9080/openapi\">http://localhost:9080/openapi</a></p>\n<p>You should see the StarterResource endpoint listed like this:</p>\n<pre><code>openapi: 3.0.0\ninfo:\n  title: Deployed APIs\n  version: 1.0.0\nservers:\n- url: http://localhost:9080\n- url: https://localhost:9443\npaths:\n  /starter/resource:\n    get:\n      operationId: getRequest\n      responses:\n        default:\n          description: default response\n          content:\n            '*/*':\n              schema:\n                type: string\n</code></pre>\n<h3 id=\"metrics\"><a href=\"#metrics\" aria-label=\"metrics permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Metrics</h3>\n<p>Finally, you can check out some metrics for your application by navigating to the following URL:</p>\n<p><a href=\"http://localhost:9080/metrics\">http://localhost:9080/metrics</a></p>\n<p>The username for this endpoint is \"admin\", and for security purposes, the password is automatically generated by the container at runtime.</p>\n<p>To get the generated password, enter the following command where <em>my-project</em> is the name of your project directory:</p>\n<pre><code>docker exec -it my-project-dev  bash -c \"grep keystore /opt/ol/wlp/usr/servers/defaultServer/server.env\"\n</code></pre>\n<p>You should see output similar to this:</p>\n<pre><code>keystore_password=2r1aquTO3VVUVON7kCDdzno\n</code></pre>\n<p>The password is the value of the <strong>keystore_password</strong> variable. Enter that password in the browser prompt.</p>\n<p>You should see text-form metrics data similar to this:</p>\n<pre><code>...\n\n# TYPE base_memory_usedHeap_bytes gauge\n# HELP base_memory_usedHeap_bytes Displays the amount of used heap memory in bytes.\nbase_memory_usedHeap_bytes 5.5484848E7\n\n...\n</code></pre>\n<p>When you're done, type <code>Ctrl-C</code> to end the <code>appsody run</code>.</p>\n<h2 id=\"building-a-production-image\"><a href=\"#building-a-production-image\" aria-label=\"building a production image permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building a production image</h2>\n<p>Now you are done with your development and are ready to package up your app in an Open Liberty Docker image.\nTo do this, issue the following command.</p>\n<pre><code>appsody build\n</code></pre>\n<p>The first build may take a bit of time. This is due to the application being rebuilt from the ground up which\nensures that no local dependencies are used. However, as a result of deliberate caching, subsequent\nruns will be much faster.</p>\n<p>When the build completes, your app will be built into an Open Liberty image and tuned to be lightweight and fast.</p>\n<p>Run your image by issuing the following where <em>my_project</em> is the project directory:</p>\n<pre><code>docker run -p 9080:9080 -p 9443:9443 dev.local/my_project\n</code></pre>\n<p>Your app should start up lightning fast, and the <a href=\"http://localhost:9080/starter/resource\">resource endpoint</a> should be available as it was before.</p>\n<h1 id=\"next-steps\"><a href=\"#next-steps\" aria-label=\"next steps permalink\" class=\"header-link-icon\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next Steps</h1>\n<p>Find out more about Appsody with our other tutorials by visiting <a href=\"https://appsody.dev\">https://appsody.dev</a></p>\n<p>Any questions or want to chat, come join us on Slack!</p>\n<p>You can also find a bunch of other helpful guides for creating Java applications with OpenLiberty <a href=\"https://openliberty.io/guides/\">here</a></p>","frontmatter":{"title":"Using the Open Liberty stack"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"pagePath":"/tutorials/open-liberty-stack-tutorial/"}}}